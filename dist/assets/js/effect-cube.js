import{g as R,c as C,f as V}from"./swiper-core.js";function j(q){let{swiper:e,extendParams:o,on:f,emit:c,params:S}=q;e.autoplay={running:!1,paused:!1,timeLeft:0},o({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let E,D,r=S&&S.autoplay?S.autoplay.delay:3e3,i=S&&S.autoplay?S.autoplay.delay:3e3,a,s=new Date().getTime(),n,M,l,A,$,u,g;function F(t){!e||e.destroyed||!e.wrapperEl||t.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",F),!(g||t.detail&&t.detail.bySwiperTouchMove)&&d())}const T=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?n=!0:n&&(i=a,n=!1);const t=e.autoplay.paused?a:s+i-new Date().getTime();e.autoplay.timeLeft=t,c("autoplayTimeLeft",t,t/r),D=requestAnimationFrame(()=>{T()})},m=()=>{let t;return e.virtual&&e.params.virtual.enabled?t=e.slides.find(h=>h.classList.contains("swiper-slide-active")):t=e.slides[e.activeIndex],t?parseInt(t.getAttribute("data-swiper-autoplay"),10):void 0},L=t=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(D),T();let x=typeof t>"u"?e.params.autoplay.delay:t;r=e.params.autoplay.delay,i=e.params.autoplay.delay;const h=m();!Number.isNaN(h)&&h>0&&typeof t>"u"&&(x=h,r=h,i=h),a=x;const I=e.params.speed,B=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(I,!0,!0),c("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,I,!0,!0),c("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(I,!0,!0),c("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,I,!0,!0),c("autoplay")),e.params.cssMode&&(s=new Date().getTime(),requestAnimationFrame(()=>{L()})))};return x>0?(clearTimeout(E),E=setTimeout(()=>{B()},x)):requestAnimationFrame(()=>{B()}),x},v=()=>{s=new Date().getTime(),e.autoplay.running=!0,L(),c("autoplayStart")},y=()=>{e.autoplay.running=!1,clearTimeout(E),cancelAnimationFrame(D),c("autoplayStop")},p=(t,x)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(E),t||(u=!0);const h=()=>{c("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",F):d()};if(e.autoplay.paused=!0,x){$&&(a=e.params.autoplay.delay),$=!1,h();return}a=(a||e.params.autoplay.delay)-(new Date().getTime()-s),!(e.isEnd&&a<0&&!e.params.loop)&&(a<0&&(a=0),h())},d=()=>{e.isEnd&&a<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(s=new Date().getTime(),u?(u=!1,L(a)):L(),e.autoplay.paused=!1,c("autoplayResume"))},b=()=>{if(e.destroyed||!e.autoplay.running)return;const t=R();t.visibilityState==="hidden"&&(u=!0,p(!0)),t.visibilityState==="visible"&&d()},P=t=>{t.pointerType==="mouse"&&(u=!0,g=!0,!(e.animating||e.autoplay.paused)&&p(!0))},w=t=>{t.pointerType==="mouse"&&(g=!1,e.autoplay.paused&&d())},z=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",P),e.el.addEventListener("pointerleave",w))},O=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",P),e.el.removeEventListener("pointerleave",w))},N=()=>{R().addEventListener("visibilitychange",b)},H=()=>{R().removeEventListener("visibilitychange",b)};f("init",()=>{e.params.autoplay.enabled&&(z(),N(),v())}),f("destroy",()=>{O(),H(),e.autoplay.running&&y()}),f("_freeModeStaticRelease",()=>{(l||u)&&d()}),f("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?y():p(!0,!0)}),f("beforeTransitionStart",(t,x,h)=>{e.destroyed||!e.autoplay.running||(h||!e.params.autoplay.disableOnInteraction?p(!0,!0):y())}),f("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){y();return}M=!0,l=!1,u=!1,A=setTimeout(()=>{u=!0,l=!0,p(!0)},200)}}),f("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!M)){if(clearTimeout(A),clearTimeout(E),e.params.autoplay.disableOnInteraction){l=!1,M=!1;return}l&&e.params.cssMode&&d(),l=!1,M=!1}}),f("slideChange",()=>{e.destroyed||!e.autoplay.running||($=!0)}),Object.assign(e.autoplay,{start:v,stop:y,pause:p,resume:d})}function _(q){const{effect:e,swiper:o,on:f,setTranslate:c,setTransition:S,overwriteParams:E,perspective:D,recreateShadows:r,getEffectParams:i}=q;f("beforeInit",()=>{if(o.params.effect!==e)return;o.classNames.push(`${o.params.containerModifierClass}${e}`),D&&D()&&o.classNames.push(`${o.params.containerModifierClass}3d`);const s=E?E():{};Object.assign(o.params,s),Object.assign(o.originalParams,s)}),f("setTranslate _virtualUpdated",()=>{o.params.effect===e&&c()}),f("setTransition",(s,n)=>{o.params.effect===e&&S(n)}),f("transitionEnd",()=>{if(o.params.effect===e&&r){if(!i||!i().slideShadows)return;o.slides.forEach(s=>{s.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(n=>n.remove())}),r()}});let a;f("virtualUpdate",()=>{o.params.effect===e&&(o.slides.length||(a=!0),requestAnimationFrame(()=>{a&&o.slides&&o.slides.length&&(c(),a=!1)}))})}function U(q){let{swiper:e,extendParams:o,on:f}=q;o({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const c=(r,i,a)=>{let s=a?r.querySelector(".swiper-slide-shadow-left"):r.querySelector(".swiper-slide-shadow-top"),n=a?r.querySelector(".swiper-slide-shadow-right"):r.querySelector(".swiper-slide-shadow-bottom");s||(s=C("div",`swiper-slide-shadow-cube swiper-slide-shadow-${a?"left":"top"}`.split(" ")),r.append(s)),n||(n=C("div",`swiper-slide-shadow-cube swiper-slide-shadow-${a?"right":"bottom"}`.split(" ")),r.append(n)),s&&(s.style.opacity=Math.max(-i,0)),n&&(n.style.opacity=Math.max(i,0))};_({effect:"cube",swiper:e,on:f,setTranslate:()=>{const{el:r,wrapperEl:i,slides:a,width:s,height:n,rtlTranslate:M,size:l,browser:A}=e,$=V(e),u=e.params.cubeEffect,g=e.isHorizontal(),F=e.virtual&&e.params.virtual.enabled;let T=0,m;u.shadow&&(g?(m=e.wrapperEl.querySelector(".swiper-cube-shadow"),m||(m=C("div","swiper-cube-shadow"),e.wrapperEl.append(m)),m.style.height=`${s}px`):(m=r.querySelector(".swiper-cube-shadow"),m||(m=C("div","swiper-cube-shadow"),r.append(m))));for(let v=0;v<a.length;v+=1){const y=a[v];let p=v;F&&(p=parseInt(y.getAttribute("data-swiper-slide-index"),10));let d=p*90,b=Math.floor(d/360);M&&(d=-d,b=Math.floor(-d/360));const P=Math.max(Math.min(y.progress,1),-1);let w=0,z=0,O=0;p%4===0?(w=-b*4*l,O=0):(p-1)%4===0?(w=0,O=-b*4*l):(p-2)%4===0?(w=l+b*4*l,O=l):(p-3)%4===0&&(w=-l,O=3*l+l*4*b),M&&(w=-w),g||(z=w,w=0);const N=`rotateX(${$(g?0:-d)}deg) rotateY(${$(g?d:0)}deg) translate3d(${w}px, ${z}px, ${O}px)`;P<=1&&P>-1&&(T=p*90+P*90,M&&(T=-p*90-P*90)),y.style.transform=N,u.slideShadows&&c(y,P,g)}if(i.style.transformOrigin=`50% 50% -${l/2}px`,i.style["-webkit-transform-origin"]=`50% 50% -${l/2}px`,u.shadow)if(g)m.style.transform=`translate3d(0px, ${s/2+u.shadowOffset}px, ${-s/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${u.shadowScale})`;else{const v=Math.abs(T)-Math.floor(Math.abs(T)/90)*90,y=1.5-(Math.sin(v*2*Math.PI/360)/2+Math.cos(v*2*Math.PI/360)/2),p=u.shadowScale,d=u.shadowScale/y,b=u.shadowOffset;m.style.transform=`scale3d(${p}, 1, ${d}) translate3d(0px, ${n/2+b}px, ${-n/2/d}px) rotateX(-89.99deg)`}const L=(A.isSafari||A.isWebView)&&A.needPerspectiveFix?-l/2:0;i.style.transform=`translate3d(0px,0,${L}px) rotateX(${$(e.isHorizontal()?0:T)}deg) rotateY(${$(e.isHorizontal()?-T:0)}deg)`,i.style.setProperty("--swiper-cube-translate-z",`${L}px`)},setTransition:r=>{const{el:i,slides:a}=e;if(a.forEach(s=>{s.style.transitionDuration=`${r}ms`,s.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(n=>{n.style.transitionDuration=`${r}ms`})}),e.params.cubeEffect.shadow&&!e.isHorizontal()){const s=i.querySelector(".swiper-cube-shadow");s&&(s.style.transitionDuration=`${r}ms`)}},recreateShadows:()=>{const r=e.isHorizontal();e.slides.forEach(i=>{const a=Math.max(Math.min(i.progress,1),-1);c(i,a,r)})},getEffectParams:()=>e.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}export{j as A,U as E};
