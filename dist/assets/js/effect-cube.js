import{c as M,g as F}from"./swiper-core.js";function R(v){const{effect:e,swiper:a,on:w,setTranslate:$,setTransition:z,overwriteParams:E,perspective:P,recreateShadows:t,getEffectParams:r}=v;w("beforeInit",()=>{if(a.params.effect!==e)return;a.classNames.push(`${a.params.containerModifierClass}${e}`),P&&P()&&a.classNames.push(`${a.params.containerModifierClass}3d`);const s=E?E():{};Object.assign(a.params,s),Object.assign(a.originalParams,s)}),w("setTranslate _virtualUpdated",()=>{a.params.effect===e&&$()}),w("setTransition",(s,o)=>{a.params.effect===e&&z(o)}),w("transitionEnd",()=>{if(a.params.effect===e&&t){if(!r||!r().slideShadows)return;a.slides.forEach(s=>{s.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(o=>o.remove())}),t()}});let i;w("virtualUpdate",()=>{a.params.effect===e&&(a.slides.length||(i=!0),requestAnimationFrame(()=>{i&&a.slides&&a.slides.length&&($(),i=!1)}))})}function X(v){let{swiper:e,extendParams:a,on:w}=v;a({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const $=(t,r,i)=>{let s=i?t.querySelector(".swiper-slide-shadow-left"):t.querySelector(".swiper-slide-shadow-top"),o=i?t.querySelector(".swiper-slide-shadow-right"):t.querySelector(".swiper-slide-shadow-bottom");s||(s=M("div",`swiper-slide-shadow-cube swiper-slide-shadow-${i?"left":"top"}`.split(" ")),t.append(s)),o||(o=M("div",`swiper-slide-shadow-cube swiper-slide-shadow-${i?"right":"bottom"}`.split(" ")),t.append(o)),s&&(s.style.opacity=Math.max(-r,0)),o&&(o.style.opacity=Math.max(r,0))};R({effect:"cube",swiper:e,on:w,setTranslate:()=>{const{el:t,wrapperEl:r,slides:i,width:s,height:o,rtlTranslate:q,size:l,browser:T}=e,S=F(e),p=e.params.cubeEffect,m=e.isHorizontal(),I=e.virtual&&e.params.virtual.enabled;let g=0,n;p.shadow&&(m?(n=e.wrapperEl.querySelector(".swiper-cube-shadow"),n||(n=M("div","swiper-cube-shadow"),e.wrapperEl.append(n)),n.style.height=`${s}px`):(n=t.querySelector(".swiper-cube-shadow"),n||(n=M("div","swiper-cube-shadow"),t.append(n))));for(let h=0;h<i.length;h+=1){const b=i[h];let d=h;I&&(d=parseInt(b.getAttribute("data-swiper-slide-index"),10));let f=d*90,u=Math.floor(f/360);q&&(f=-f,u=Math.floor(-f/360));const x=Math.max(Math.min(b.progress,1),-1);let c=0,O=0,y=0;d%4===0?(c=-u*4*l,y=0):(d-1)%4===0?(c=0,y=-u*4*l):(d-2)%4===0?(c=l+u*4*l,y=l):(d-3)%4===0&&(c=-l,y=3*l+l*4*u),q&&(c=-c),m||(O=c,c=0);const H=`rotateX(${S(m?0:-f)}deg) rotateY(${S(m?f:0)}deg) translate3d(${c}px, ${O}px, ${y}px)`;x<=1&&x>-1&&(g=d*90+x*90,q&&(g=-d*90-x*90)),b.style.transform=H,p.slideShadows&&$(b,x,m)}if(r.style.transformOrigin=`50% 50% -${l/2}px`,r.style["-webkit-transform-origin"]=`50% 50% -${l/2}px`,p.shadow)if(m)n.style.transform=`translate3d(0px, ${s/2+p.shadowOffset}px, ${-s/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${p.shadowScale})`;else{const h=Math.abs(g)-Math.floor(Math.abs(g)/90)*90,b=1.5-(Math.sin(h*2*Math.PI/360)/2+Math.cos(h*2*Math.PI/360)/2),d=p.shadowScale,f=p.shadowScale/b,u=p.shadowOffset;n.style.transform=`scale3d(${d}, 1, ${f}) translate3d(0px, ${o/2+u}px, ${-o/2/f}px) rotateX(-89.99deg)`}const A=(T.isSafari||T.isWebView)&&T.needPerspectiveFix?-l/2:0;r.style.transform=`translate3d(0px,0,${A}px) rotateX(${S(e.isHorizontal()?0:g)}deg) rotateY(${S(e.isHorizontal()?-g:0)}deg)`,r.style.setProperty("--swiper-cube-translate-z",`${A}px`)},setTransition:t=>{const{el:r,slides:i}=e;if(i.forEach(s=>{s.style.transitionDuration=`${t}ms`,s.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(o=>{o.style.transitionDuration=`${t}ms`})}),e.params.cubeEffect.shadow&&!e.isHorizontal()){const s=r.querySelector(".swiper-cube-shadow");s&&(s.style.transitionDuration=`${t}ms`)}},recreateShadows:()=>{const t=e.isHorizontal();e.slides.forEach(r=>{const i=Math.max(Math.min(r.progress,1),-1);$(r,i,t)})},getEffectParams:()=>e.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}export{X as E};
