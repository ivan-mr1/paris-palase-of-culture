import{S as f}from"./swiper-core.js";import{N as v,P as g}from"./pagination.js";function b(){function c(){return new Promise(n=>{if(window.YT&&window.YT.Player)n(window.YT);else{const a=document.createElement("script");a.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=()=>{n(window.YT)},document.head.appendChild(a)}})}let o=null;const r=new Map;let u=null;async function w(){const n=await c();u=new f(".slider-video",{spaceBetween:40,slidesPerView:3,loop:!0,breakpoints:{320:{slidesPerView:1,spaceBetween:15},425:{slidesPerView:2,spaceBetween:20},769:{slidesPerView:3,spaceBetween:30}},navigation:{nextEl:".slider-video__button-prev",prevEl:".slider-video__button-next"},pagination:{el:".slider-video__pagination",type:"bullets",clickable:!0,bulletClass:"slider-dot",bulletActiveClass:"slider-dot_active",renderBullet:(t,e)=>`<div class="${e}"></div>`},mousewheel:!0,keyboard:!0,modules:[v,g]}),document.querySelectorAll(".slider-video__slide").forEach(t=>{const e=t.dataset.videoId,i="player-"+e;r.set(e,new n.Player(i,{videoId:e,playerVars:{controls:0,modestbranding:1,rel:0,showinfo:0,autoplay:0,fs:0,iv_load_policy:3,disablekb:1},events:{onStateChange:l=>p(l,e)}}))});function a(){if(o){const t=r.get(o);t&&t.getPlayerState()===n.PlayerState.PLAYING&&t.pauseVideo(),d(o),s(o,!1),o=null}}function d(t){const e=document.querySelector(`.slider-video__slide[data-video-id="${t}"]`);if(!e)return;const i=e.querySelector(".video-thumb");i&&(i.style.display="")}function y(t){const e=document.querySelector(`.slider-video__slide[data-video-id="${t}"]`);if(!e)return;const i=e.querySelector(".video-thumb");i&&(i.style.display="none")}function s(t,e){const i=document.querySelector(`.slider-video__slide[data-video-id="${t}"]`);if(!i)return;const l=i.querySelector(".play-btn");l&&(e?l.style.backgroundImage=`url("data:image/svg+xml;utf8,<svg fill='%23B3B3B3' viewBox='0 0 64 64' xmlns='http://www.w3.org/2000/svg'><rect x='14' y='12' width='12' height='40'/><rect x='38' y='12' width='12' height='40'/></svg>")`:l.style.backgroundImage=`url("data:image/svg+xml;utf8,<svg fill='%23B3B3B3' viewBox='0 0 64 64' xmlns='http://www.w3.org/2000/svg'><polygon points='16,12 52,32 16,52'/></svg>")`)}document.querySelectorAll(".slider-video__slide").forEach(t=>{t.addEventListener("click",e=>{if(e.target.classList.contains("play-btn")||e.target===t){const i=t.dataset.videoId,l=r.get(i);if(!l)return;o===i&&l.getPlayerState()===n.PlayerState.PLAYING?(l.pauseVideo(),s(i,!1),d(i),o=null):(a(),window.mainPlayerAPI&&window.mainPlayerAPI.stopMainVideo(),l.playVideo(),s(i,!0),y(i),o=i)}})}),u.on("slideChangeTransitionStart",a);function p(t,e){t.data===n.PlayerState.ENDED&&(s(e,!1),d(e),o===e&&(o=null))}return{stopActiveVideo:a}}return w()}export{b as default};
