import{S as b}from"./swiper-core.js";import{N as S,P as _}from"./pagination.js";function V(){function p(){return new Promise(o=>{if(window.YT&&window.YT.Player)o(window.YT);else{const n=document.createElement("script");n.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=()=>{o(window.YT)},document.head.appendChild(n)}})}let i=null;const d=new Map;let y=null;async function f(){const o=await p();y=new b(".slider-video",{spaceBetween:40,slidesPerView:3,loop:!0,breakpoints:{320:{slidesPerView:1,spaceBetween:15},425:{slidesPerView:2,spaceBetween:20},769:{slidesPerView:3,spaceBetween:30}},navigation:{nextEl:".slider-video__button-prev",prevEl:".slider-video__button-next"},pagination:{el:".slider-video__pagination",type:"bullets",clickable:!0,bulletClass:"slider-dot",bulletActiveClass:"slider-dot_active",renderBullet:(t,e)=>`<div class="${e}"></div>`},mousewheel:!0,keyboard:!0,modules:[S,_]}),document.querySelectorAll(".slider-video__slide").forEach(t=>{const e=t.dataset.videoId,l="player-"+e;d.set(e,new o.Player(l,{videoId:e,playerVars:{controls:0,modestbranding:1,rel:0,showinfo:0,autoplay:0,fs:0,iv_load_policy:3,disablekb:1},events:{onStateChange:s=>v(s,e)}}))});function n(t){const e=document.querySelector(`.slider-video__slide[data-video-id="${t}"]`);if(!e)return;const l=e.querySelector(".video-thumb");l&&(l.style.display="")}function g(t){const e=document.querySelector(`.slider-video__slide[data-video-id="${t}"]`);if(!e)return;const l=e.querySelector(".video-thumb");l&&(l.style.display="none")}function r(t,e){const l=document.querySelector(`.slider-video__slide[data-video-id="${t}"]`);if(!l)return;const s=l.querySelector(".play-btn");s&&(e?s.style.backgroundImage=`url("data:image/svg+xml;utf8,<svg fill='%23B3B3B3' viewBox='0 0 64 64' xmlns='http://www.w3.org/2000/svg'><rect x='14' y='12' width='12' height='40'/><rect x='38' y='12' width='12' height='40'/></svg>")`:s.style.backgroundImage=`url("data:image/svg+xml;utf8,<svg fill='%23B3B3B3' viewBox='0 0 64 64' xmlns='http://www.w3.org/2000/svg'><polygon points='16,12 52,32 16,52'/></svg>")`)}function v(t,e){t.data===o.PlayerState.ENDED&&(r(e,!1),n(e),i===e&&(i=null))}function w(){if(i){const t=d.get(i);t&&t.getPlayerState()===o.PlayerState.PLAYING&&t.pauseVideo(),r(i,!1),n(i),i=null}}return document.querySelectorAll(".slider-video__slide").forEach(t=>{t.addEventListener("click",e=>{const l=e.target.classList.contains("play-btn"),s=e.target.classList.contains("video-thumb"),m=e.target===t;if(l||s||m){const a=t.dataset.videoId,c=d.get(a);if(!c)return;const P=i===a,h=c.getPlayerState()===o.PlayerState.PLAYING;if(P&&h)c.pauseVideo(),r(a,!1),n(a),i=null;else{if(i&&i!==a){const u=d.get(i);u&&u.getPlayerState()===o.PlayerState.PLAYING&&(u.pauseVideo(),r(i,!1),n(i))}window.mainPlayerAPI&&window.mainPlayerAPI.stopMainVideo(),c.playVideo(),r(a,!0),g(a),i=a}}})}),y.on("slideChangeTransitionStart",w),{stopActiveVideo:w}}return f()}export{V as default};
